G=[663.84, 699.0720000000001, 737.344, 776.416, 817.7760000000001, 862.1920000000002, 908.1440000000001, 956.4000000000001, 1007.7120000000001, 1059.0240000000001, 1114.1760000000002, 1172.384, 1229.0400000000002, 1288.784, 1351.6000000000001, 1415.9520000000002, 1483.3600000000001, 1555.344, 1631.2, 1709.344, 1791.28, 1874.0320000000002, 1959.8080000000002, 2047.0880000000002, 2137.472, 2229.4080000000004, 2324.3840000000005, 2421.664, 2520.4320000000002, 2622.32, 2726.496, 2832.224, 2940.2560000000003, 3052.0800000000004, 3168.496, 3289.5040000000004, 3415.1040000000003, 3546.0480000000007, 3685.440000000001, 3863.120000000001, 4058.4160000000006, 4280.5120000000015, 4461.232000000001, 4682.56, 4893.152000000001, 5126.0, 5369.520000000001, 5598.5120000000015, 5819.088000000001, 6035.84, 6265.632000000001, 6521.456, 6737.44, 6938.896, 7150.2880000000005, 7350.944, 7569.984, 7802.816000000001, 8042.544000000001, 8256.976, 8505.888, 8721.136, 8966.960000000001, 9199.056, 9492.384, 9749.696, 9987.120000000003, 10231.440000000002, 10471.168000000001, 10717.792000000001, 10970.560000000001, 11243.968000000003, 11488.304000000002, 11743.312000000004, 11996.032000000001, 12256.432, 12487.712000000001, 12704.448, 12946.464, 13173.152000000002, 13386.112000000001, 13595.968, 13808.112000000001, 14014.112000000001, 14222.464000000002, 14430.016000000001, 14634.480000000003, 14842.832000000002, 15048.080000000002, 15258.672000000004, 15468.480000000003, 15679.072000000004, 15901.952000000003, 16134.784000000003, 16373.760000000004, 16619.584000000003, 16865.456000000006, 17093.696000000007, 17310.432000000008, 17527.920000000006, 17757.664000000004, 18012.736000000004, 18286.176000000007, 18559.568000000007, 18839.872000000003, 19126.272000000004, 19414.224000000006, 19704.464000000007, 20005.44000000001, 20308.72000000001, 20615.056000000008, 20936.720000000005, 21272.928000000004, 21613.744000000006, 21956.848000000005, 22324.432000000008, 22688.224000000002, 23054.320000000003, 23442.592000000004, 23826.272000000004, 24230.640000000003, 24651.840000000004, 25068.448000000004, 25527.216000000004, 25995.120000000006, 26496.768000000007, 26994.559999999998, 27489.296000000002, 27991.744000000006, 28518.656000000006, 29097.648000000005, 29744.784000000003, 30343.648, 30953.264000000003, 31682.336, 32298.848000000005, 32932.192, 33737.12000000001, 34400.352000000006, 35032.94400000001, 35663.24800000001, 35974.224, 36642.832, 37139.888, 37302.272, 37390.352000000006, 37463.904, 37547.39200000001, 37641.584, 37740.416000000005, 37831.552, 37899.69600000001, 38011.472, 38153.136, 38285.6, 38464.816000000006, 38940.416000000005, 39704.72000000001, 40453.728, 41283.136000000006, 42075.776000000005, 42918.976, 43744.576, 44637.53600000001, 45457.76, 46265.728, 47098.976, 47931.424, 48770.768000000004, 49553.47200000001, 50319.32800000001, 51040.016, 51669.56800000001, 52266.19200000001, 52806.14400000001, 53277.92000000001, 53745.08800000002, 54158.64000000001, 54484.864, 54793.488000000005, 55059.984, 55293.568, 55509.56800000001, 55715.616000000016, 55910.864000000016, 56152.09600000001, 56454.624, 56808.41600000002, 57256.44800000001, 57777.23200000001, 58403.728, 59080.8, 59799.13600000001, 60605.56800000001, 61426.528000000006, 61982.528000000006, 62316.448000000004, 62854.863999999994, 63631.472, 64486.91199999999, 64885.168, 65572.87999999999, 65886.86399999999, 65985.648, 66040.752, 66098.95999999999, 66148.72, 66263.6, 66467.31199999999, 66651.12, 66860.95999999999, 67102.192, 67416.96, 67834.30399999999, 68313.76, 68826.144, 69301.00799999999, 69753.63199999998, 70256.01599999999, 70815.872, 71377.264, 71961.632, 72339.968, 72797.952, 72990.97600000001, 73018.512, 73099.712, 73090.528, 73077.488, 73000.144, 72651.696, 72534.528, 72477.12, 72456.48, 72446.544, 72732.192, 73058.46399999999, 73238.43199999999, 73614.46399999999, 74071.696, 74506.688, 75169.92, 75427.248, 75860.736, 76602.848, 77386.288, 78100.816, 78748.75200000001, 79319.296, 79810.192, 80222.19200000001, 80557.664, 80821.12, 81022.56000000001, 81196.43200000002, 81278.36800000002, 81018.70400000001, 80471.88800000002, 79963.34400000001, 79267.20000000001, 78819.16800000002, 78409.40800000001, 78060.96, 77708.656, 77426.80000000002, 77203.96800000002, 76948.16000000002, 76669.40800000001, 76360.78400000001, 76040.656, 75675.32800000001, 75259.47200000001, 74869.64800000002, 74446.896, 74035.6, 73661.056, 73299.568, 72963.36, 72688.448, 72474.0, 72281.74399999999, 72148.48000000001, 72016.72, 71924.048, 71867.39199999999, 71806.14399999999, 71693.568, 71525.08799999999, 71248.624, 70904.768, 70519.55199999998, 70058.47999999998, 69486.39999999998, 68800.94399999997, 68049.63199999998, 67529.64799999997, 67250.09599999998, 66666.51199999999, 65877.66399999999, 64955.568, 64539.71199999999, 63794.543999999994, 63380.23999999999, 63198.72, 63016.46400000001, 62770.64000000001, 62599.12000000001, 62335.648, 61917.48800000001, 61519.23200000001, 61094.19200000002, 60600.19200000002, 60033.456000000006, 59344.960000000014, 58577.552, 57725.10400000002, 56898.68800000002, 56076.928000000014, 55172.48000000002, 54208.272000000026, 53214.928000000014, 52180.22400000002, 51354.65600000001, 50443.29600000001, 49761.68000000001, 49197.280000000006, 48570.76800000001, 48024.704000000005, 47470.19200000001, 46961.664000000004, 46684.416000000005, 46099.29600000001, 45499.63200000001, 44847.10400000001, 44065.90400000001, 43085.600000000006, 42060.128000000004, 41004.03200000001, 39891.21600000001, 38656.64000000001, 37422.08000000001, 36249.56800000001, 35169.68000000001, 34042.336, 32950.22400000001, 31868.09600000001, 30860.224000000002, 29923.600000000002, 29062.015999999992, 28279.327999999994, 27572.431999999997, 26939.023999999994, 26371.536, 25850.767999999996, 25355.263999999996, 24912.592, 24499.039999999997, 24073.248, 23618.336, 23295.167999999998, 22726.928, 22105.823999999997, 21411.168, 20666.751999999997, 19863.375999999997, 19047.696, 18255.808, 17476.928000000004, 16724.864, 16033.312000000004, 15397.664000000002, 14835.520000000002, 14368.351999999999, 13955.551999999996, 13591.007999999996, 13248.703999999992, 12926.271999999995, 12646.719999999994, 12367.919999999995, 12060.831999999995, 11786.671999999995, 11488.735999999994, 11202.351999999993, 10891.423999999994, 10553.663999999993, 10172.287999999993, 9783.215999999991, 9393.391999999993, 9018.863999999992, 8632.079999999993, 8180.191999999993, 7751.295999999995, 7377.551999999996, 7017.5999999999985, 6699.775999999998, 6407.984, 6096.304000000002, 5900.240000000002, 5679.648000000001, 5511.1680000000015, 5279.088000000002, 5058.544000000002, 4860.192000000001, 4644.240000000001, 4463.504, 4334.0960000000005, 4134.192, 3956.5280000000002, 3831.727999999999, 3704.6239999999993, 3570.575999999999, 3456.511999999999, 3328.6559999999986, 3212.2879999999986, 3106.6239999999984, 3028.5279999999984, 2961.9199999999983, 2906.7519999999986, 2858.4799999999987, 2813.3119999999985]
from powerdata import NoPCM,P1,P2,P3,P4,P5,P6,P7,M12,M13,M24,M26,M35,M36,M37
import matplotlib.pyplot as plt
import matplotlib.dates as mdates
from datetime import datetime
x = []
for i in range(150,570):
    time=datetime(2022,3,1,i//30,(i%30)*2)
    x.append(time)
eff1=[]
eff2=[]
for i in range(420):
    eff1.append(P1[i]*100*116/G[i]/2)
    eff2.append(NoPCM[i]*100*116/G[i]/2)
dP1=[]
dP2=[]
dP3=[]
dP4=[]
dP5=[]
dP6=[]
dP7=[]
for i in range(420):
    dP1.append((P1[i]-NoPCM[i])*100*116/G[i]/2)
    dP2.append((P2[i]-NoPCM[i])*100*116/G[i]/2)
    dP3.append((P3[i]-NoPCM[i])*100*116/G[i]/2)
    dP4.append((P4[i]-NoPCM[i])*100*116/G[i]/2)
    dP5.append((P5[i]-NoPCM[i])*100*116/G[i]/2)
    dP6.append((P6[i]-NoPCM[i])*100*116/G[i]/2)
    dP7.append((P7[i]-NoPCM[i])*100*116/G[i]/2)
ax = plt.subplot()
# ax.plot_date(x, M37,'#008037',xdate=True)
# ax.plot_date(x, dP1,'k',xdate=True)
# ax.plot_date(x, dP2,'k',dashes=[1,1.5],xdate=True)
# ax.plot_date(x, dP3,'k',dashes=[4, 1],xdate=True)
# ax.plot_date(x, dP4,'k-.',xdate=True)
# ax.plot_date(x, dP5,'grey',xdate=True)
# ax.plot_date(x, dP6,'grey',dashes=[1,1.5],xdate=True)
# ax.plot_date(x, dP7,'grey',dashes=[4, 1],xdate=True)
ax.plot_date(x, eff1,'k',xdate=True)
ax.plot_date(x, eff2,'k-.',xdate=True)
ax.set_ylabel('Power Conversion Efficiency [%]',fontsize='36')
ax.set_xlabel('Time',fontsize='36')
myFmt = mdates.DateFormatter('%H:%M')
ax.xaxis.set_major_formatter(myFmt)
ax.tick_params(axis='both', which='major', labelsize=32)
# plt.legend(['Paraffin Wax','Sodium Sulfate Decahydrate','Polyethylene Glycol','Calcium Chloride Hexahydrate','Octadecane','Lauric Acid','Capric Acid'],loc='upper right',fontsize=14)
plt.ylim(12,16)
# plt.legend(['PV-PCM','Conventional PV'],loc='upper right',fontsize='36')
plt.grid(True,alpha=0.5)
plt.show()